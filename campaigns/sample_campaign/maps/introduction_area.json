{
  "mapId": "introduction_area",
  "name": "Introduction Area",
  "width": 30,
  "height": 20,
  "tiles": [
    { "char": "#", "x": 0, "y": 0, "blocksMovement": true, "blocksVision": true, "name": "Wall" },
    { "char": ".", "x": 1, "y": 1, "blocksMovement": false, "blocksVision": false, "name": "Floor" }
  ],
  "objects": [
    { "id": "old_well_interaction", "type": "interactive", "char": "O", "x": 5, "y": 12, "name": "Old Well", "color": "blue", "description": "A moss-covered stone well. It looks ancient." }
  ],
  "entryPoints": [
    { "id": "start_game", "x": 2, "y": 2 }
  ],
  "storyBeats": [
    {
      "id": "entered_creepy_alley",
      "trigger": {
        "type": "onEnterCell",
        "coordinates": { "x": 15, "y": 5 }
      },
      "conditions": [
        { "type": "flagNotSet", "flag": "alley_event_triggered" }
      ],
      "actions": [
        { "type": "setFlag", "flag": "alley_event_triggered", "value": true },
        { "type": "displayText", "message": "As you step into the narrow alley, a chill runs down your spine. The shadows seem to deepen here." },
        { "type": "playSound", "soundId": "ambient_creepy_drone" },
        { "type": "startDialogue", "dialogueId": "alley_shadow_figure_encounter" }
      ],
      "onceOnly": true,
      "priority": 1
    },
    {
      "id": "inspected_old_well",
      "trigger": {
        "type": "onInteract",
        "targetObjectId": "old_well_interaction"
      },
      "conditions": [
        { "type": "questActive", "questId": "lost_locket_retrieve" },
        { "type": "questObjectiveNotCompleted", "questId": "lost_locket_retrieve", "objectiveId": "find_locket_item" }
      ],
      "actions": [
        { "type": "displayText", "message": "You peer into the old well. Amongst the debris, something glints. You reach down and retrieve a small, tarnished locket!" },
        { "type": "giveItem", "itemId": "hemlock_locket_unique", "count": 1 },
        { "type": "updateQuestObjective", "questId": "lost_locket_retrieve", "objectiveId": "find_locket_item", "status": "completed" },
        { "type": "setFlag", "flag": "found_locket_in_well", "value": true }
      ],
      "onceOnly": true,
      "priority": 10
    }
  ]
}
